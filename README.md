# Configurable mock data generation for SAP Web IDE (Cloud)
This extension provides a way for predefining some data sets generated by UI5's MockServer.  
Ported for SAP Web IDE from [brackets-ui5](https://github.com/wozjac/brackets-ui5).  
Examples: https://blogs.sap.com/2020/02/10/ui5-not-so-random-mock-data/

![preview](http://public_repo.vipserv.org/images/mockgen/screen1.png)

## Installation
This extension is available for SAP Web IDE, cloud edition.

1. Add a new destination in the Cloud Platform Cockpit.  
URL: https://sapwebidemockgen-p791767trial.dispatcher.hanatrial.ondemand.com/?hc_reset
![destination](http://public_repo.vipserv.org/images/mockgen/destination.png)  
Name and description - choose as you like.

2. Go to Extensions in SAP Web IDE (refresh if already opened) - the extension should be available 
(wait some minutes if not and refresh). 

![extension](http://public_repo.vipserv.org/images/mockgen/extension.png)  
3. Switch to "On".

## Usage
The command for generating mock data files is under Tools -> Generate mock data.  
Without any configuration the extension will generate entity files with 30 entries for the service described 
in the file found in "webapp/localService/metadata.xml". The default folder for files is "webapp/localService/mockdata", it will 
overwrite the existing ones.  
To influence the logic, please use configuration files described below.

## Configuration
### .mockgen.json
The file named .mockgen.json must be placed in the root folder of the project. 
- metadataFilePath: specifies full path to the metadata.xml file
- mockDataTargetDir: where to save generated mock .json files
```Javascript
{
	"metadataFilePath" : "path/to/metadata.xml",
	"mockDataTargetDir": "fixtures/mockData"
}
```

### .mockconfig.json
This file must be placed in the target directory for mock data (default *webapp/localService/mockdata*, use .mockgen.json to change it).  
It provides a way to put some constraints and dependency during generation of random data.  
- "skipMockGeneration": [EntitySetName1,EntitySetName2] - mock data generation will be skipped for selected entity sets, for example:
```Javascript
{
    "skipMockGeneration": ["Persons", "Suppliers"]
}
```
- predefined values
If for some entities randomly selected but predefined values should be picked up, it can be configured in the following way:
```Javascript
{
    "predefined": {
        "Entity": {
            "Property": [Value1, Value2, Value3]
        }
    }
}
```
for example:
```Javascript
{
    "predefined": {
        "Product": {
            "Rating": [1, 2, 3]
        }
    }
}
```
- predefined values based on other values
For some values it make sense to make them dependent on other values. This can be achieved with:
```Javascript
{
    "predefined": {
        "Entity": {
            "Property1": [Value1, Value2, Value2],
            "Property2": {
                "reference": "Property1",
                "values": [{
                    "key": Value1,
                    "value": "Description for value 1"
                },{
                    "key": Value2,
                    "value": "Description for value 2"
                }]
            }
        }
    }
}
```
Not all dependent values has to be provided - if not found in *values* array, it will be generated as usual.

Example:
```Javascript
{
    "predefined": {
        "Product": {
            "Rating": [1, 2, 3],
            "Description": {
                "reference": "Rating",
                "values": [{
                    "key": 1,
                    "value": "Description for rating 1"
                }]
            }
        }
    }
}
```
- re-using predefined values
It easier to keep predefined values in one place, as they might be used in several places. It can be done with help of special variables property and special $ref:... handling:
```Javascript
{
    "variables": {
        "myValues": [value1, value2, value3]
    },
    "predefined": {
        "Entity": {
            "Property1": "$ref:myValues",
            "Property2": {
                "reference": "Property1",
                "values": [{
                    "key": "value1",
                    "value": "Text1"
                }, {
                    "key": "value2",
                    "value": "Text2"
                }]
            }
        }
    }
}
```
for example
```Javascript
{
    "variables": {
        "categoryIds": ["ID1", "ID2", "ID3"]
    },
     "predefined": {
        "Category": {
            "ID": "$ref:categoryIds",
            "Name": {
                "reference": "ID",
                "values": [{
                    "key": "ID1",
                    "value": "Category1"
                }, {
                    "key": "ID2",
                    "value": "Category2"
                }, {
                    "key": "ID3",
                    "value": "Category3"
                }]
            }
        }
    }
}
```
- root URI passed to the UI5's MockServer instance can be set:
```Javascript
{
	"rootUri": "my.root.uri"
}
```
## Troubleshooting
Some useful information are outputted to SAP Web IDE console; messages are prefixed with *Mock Data Generator*.

## License
This plugin is licensed under the [MIT license](http://opensource.org/licenses/MIT).

## Author
Feel free to contact me:  
- wozjac@zoho.com 
- Twitter (https://twitter.com/jacekwoz)  
- LinkedIn (https://www.linkedin.com/in/jacek-wznk)
